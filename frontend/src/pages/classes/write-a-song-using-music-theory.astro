---
import guitar from "../../images/guitar.jpg";
import Layout from "../../layouts/Layout.astro";
import ProductPage from "../../components/ProductPage.astro";
---

<Layout>
    <ProductPage
        title="Write a song using music theory"
        price="200"
        image={guitar}
        imageAlt="Card Image"
        link="/checkout"
        linkText="Sign up"
    >
        <Fragment slot="content">
            <!-- detailed product description -->
            <div class="mt-6 space-y-4">
                <h3 class="text-2xl font-semibold">Course details:</h3>
                <p>
                    This hands-on course will take you from music theory basics
                    to writing your own complete song. Perfect for beginners and
                    experienced songwriters who want to understand the "why"
                    behind music composition.
                </p>
                <h3 class="text-2xl font-semibold">What you'll learn:</h3>
                <ul class="list-disc list-inside space-y-2">
                    <li>Basic chord progressions and how they work</li>
                    <li>Melody writing techniques</li>
                    <li>Song structure and arrangement</li>
                    <li>Practical application of music theory concepts</li>
                </ul>
                <h3 class="text-2xl font-semibold">Course Logistics</h3>
                <ul class="list-disc list-inside space-y-2">
                    <li>
                        <strong>Duration:</strong> 4 weeks
                    </li>
                    <li>
                        <strong>Format:</strong> Weekly live 1 hour classes on Zoom
                    </li>
                    <li>
                        <strong>Prerequisites:</strong> None
                    </li>
                    <li>
                        <strong>Price:</strong> $200
                    </li>
                </ul>
                <h3 class="text-2xl font-semibold">
                    Frequently Asked Questions
                </h3>
                <ul class="list-disc list-inside space-y-2">
                    <li>
                        <strong>What if I can't make a class?</strong>
                        <p>
                            If you can't make a class, you can still participate
                            by watching the recording later and working through
                            the exercises at your own pace. We will have a
                            Discord community set up as well where you can ask
                            questions and get help from other students. Refunds
                            are not given for missed classes.
                        </p>
                    </li>
                    <li>
                        <strong>What if I'm not a beginner?</strong>
                        <p>
                            This course is designed for beginners, but if you're
                            an experienced songwriter, you can still learn a
                            lot.
                        </p>
                    </li>
                    <li>
                        <strong>What is your refund policy?</strong>
                        <p>
                            If you try the first class and decide it's not for
                            you, we can offer a refund. Once the second class
                            begins, we don't offer refunds.
                        </p>
                    </li>
                </ul>
            </div>
        </Fragment>
    </ProductPage>
</Layout>

<!-- make a request to the backend to get price data? -->
<script>
    async function getProducts() {
        const errorEl = document.getElementById("error")!;

        const params = new URLSearchParams(window.location.search);
        const session_id = params.get("session_id");
        const backendUrl = import.meta.env.PUBLIC_API_URL;

        let result;
        try {
            const response = await fetch(
                `${backendUrl}/session_status?session_id=${session_id}`
            );
            result = await response.json();
        } catch (error) {
            loadingEl.style.display = "none";
            errorEl.style.display = "block";
            console.error(error);
            return;
        }

        return result;
    }
</script>
